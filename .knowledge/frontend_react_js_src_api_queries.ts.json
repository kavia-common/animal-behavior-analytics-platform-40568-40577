{"is_source_file": true, "format": "TypeScript", "description": "This file contains API definitions and React Query hooks for interacting with backend services related to animal behavior analytics. It includes type definitions for payloads, functions for API calls with mock fallbacks, and custom hooks for data fetching and mutation within a React application.", "external_files": ["@tanstack/react-query", "./client", "./mockHandlers"], "external_methods": ["useQuery", "useMutation", "useQueryClient", "client.get", "client.post"], "published": ["api", "useAnimals", "useBehaviors", "useReports", "useAnalyticsSummary", "useIngestEvent"], "classes": [], "methods": [{"name": "export function useAnalyticsSummary(params?: { sessionId?: string | string[]; reportId?: string;/ useAnalyticsSummary", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function useAnimals() { useAnimals", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function useBehaviors() { useBehaviors", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function useIngestEvent() { useIngestEvent", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function useReports() { useReports", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["isBackendEnabled", "client.get", "client.post", "mocks.getSelectedAnimal", "mocks.getBehaviorCounts", "mocks.getDurationBreakdown", "mocks.getDailyHeatmap", "mocks.getBehaviorTypes", "mocks.getBehaviors", "mocks.getReports"], "search-terms": ["analytics summary", "behavior counts", "heatmap", "ingest event", "baseline comparison", "react query hooks", "mock fallback", "animal behavior API", "typescript types"], "state": 2, "file_id": 66, "knowledge_revision": 276, "git_revision": "f4697e04615c690e647822f2d090676d15fce8e1", "revision_history": [{"139": ""}, {"177": "27bde6c3671a302ddab7215859937064730eedff"}, {"276": "f4697e04615c690e647822f2d090676d15fce8e1"}], "ctags": [{"_type": "tag", "name": "AnalyticsSummary", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^type AnalyticsSummary = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "BaselineComparison", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^type BaselineComparison = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "DiversityIndexResult", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^type DiversityIndexResult = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "IngestEvent", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^type IngestEvent = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Object", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const index = -Object.values(p).reduce((acc, pi) => (pi > 0 ? acc + pi * Math.log(pi) : ac/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "a", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const a = Array.isArray(res.data) && res.data.length ? res.data[0] : null;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^export const api = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "baseline_id", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        baseline_id: baselineId,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "color_band", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        color_band,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "color_band", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const color_band = normalized > 0.66 ? 'high' : normalized > 0.33 ? 'medium' : 'low';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "counts", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const [counts, durations, heat] = await Promise.all([mocks.getBehaviorCounts(), mocks.getD/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "counts", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const counts = await mocks.getBehaviorCounts();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "counts_by_behavior", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const counts_by_behavior: Record<string, number> = {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "durations", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const [counts, durations, heat] = await Promise.all([mocks.getBehaviorCounts(), mocks.getD/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "durations", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const durations = await mocks.getDurationBreakdown();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "durations_by_behavior", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const durations_by_behavior: Record<string, number> = {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "entries", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const entries = Object.entries(res.data.counts_by_behavior).map(([type, count]) => ({ type, /", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "entries", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const entries = Object.entries(res.data.durations_by_behavior).map(([label, value]) => ({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        const h = new Date(isoMinute).getHours();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "heat", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const [counts, durations, heat] = await Promise.all([mocks.getBehaviorCounts(), mocks.getD/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "heatmap", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const heatmap: Record<string, Record<string, number>> = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "hours", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const hours = Array(24).fill(0);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "index", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        index,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "index", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const index = -Object.values(p).reduce((acc, pi) => (pi > 0 ? acc + pi * Math.log(pi) : ac/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "index", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const normalized = max_index ? index \\/ max_index : 0;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "interpretation", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        interpretation,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "interpretation", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const interpretation =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        const key = `${today}T${String(hour).padStart(2, '0')}:00:00Z`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "labels", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const labels = (res.data || []).map((b: any) => b.label || b.category || b.id).filter(Boolea/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "max_index", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        max_index,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "max_index", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const max_index = Math.log(durations.length || 1);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "metric_deltas", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        metric_deltas,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "metric_deltas", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const metric_deltas: Record<string, Record<string, number>> = {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        normalized,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const normalized = max_index ? index \\/ max_index : 0;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "notable_flags", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        notable_flags: Object.entries(metric_deltas)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const p: Record<string, number> = {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "qc", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^  const qc = useQueryClient();$/", "language": "TypeScript", "kind": "constant", "scope": "useIngestEvent", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get('\\/animals');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get('\\/behaviors');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get('\\/reports');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get<AnalyticsSummary>('\\/analytics\\/summary');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get<AnalyticsSummary>('\\/analytics\\/summary', { params });$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get<BaselineComparison>('\\/analytics\\/baseline-comparison', {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.get<DiversityIndexResult>('\\/analytics\\/diversity-index', { params:/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^    const res = await client.post('\\/ingest\\/event', payload);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const result: BaselineComparison = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const result: DiversityIndexResult = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "summary", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const summary: AnalyticsSummary = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "support", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^        support: p,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "today", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const today = new Date().toISOString().slice(0, 10);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^      const total = durations.reduce((a: number, b: any) => a + (b.value || 0), 0);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "useAnalyticsSummary", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^export function useAnalyticsSummary(params?: { sessionId?: string | string[]; reportId?: string;/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useAnimals", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^export function useAnimals() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useBehaviors", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^export function useBehaviors() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useIngestEvent", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^export function useIngestEvent() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useReports", "path": "/home/kavia/workspace/code-generation/animal-behavior-analytics-platform-40568-40577/frontend_react_js/src/api/queries.ts", "pattern": "/^export function useReports() {$/", "language": "TypeScript", "kind": "function"}], "hash": "b6cb483464e7f1915b01d4ce7a847802", "format-version": 4, "code-base-name": "frontend_react_js", "filename": "frontend_react_js/src/api/queries.ts"}